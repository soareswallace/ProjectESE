C51 COMPILER V9.59.0.0   PROJ1                                                             02/25/2019 16:28:31 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE PROJ1
OBJECT MODULE PLACED IN .\Objects\Proj1.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Proj1.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND CODE PRINT(.\Listing
                    -s\Proj1.lst) TABS(2) OBJECT(.\Objects\Proj1.obj)

line level    source

   1          #include <REG51F.H>
   2          
   3          sbit c1 = P2^0; //CL
   4          sbit c2 = P2^1; //CH
   5          
   6          void trocarP1L(){
   7   1        static char estado = 2;
   8   1        static unsigned long int cont = 0, contmax = 11500;
   9   1        
  10   1        switch(estado) {
  11   2          case 0:
  12   2            if(c1){
  13   3              cont = 0;
  14   3              P1 = (P1&0xF0) | (P0&0x0F);
  15   3              estado = 1;
  16   3              break;
  17   3            }
  18   2            break;
  19   2      
  20   2          case 1:
  21   2            if (cont++ == contmax) {
  22   3              estado = 2;
  23   3              break;
  24   3            }
  25   2            break;
  26   2            
  27   2          case 2:
  28   2            P1 = (P1&0xF0);
  29   2            if (c1 == 0) {
  30   3              estado = 0;
  31   3            }
  32   2            break;
  33   2          
  34   2          default:
  35   2            estado = 2;
  36   2            break;
  37   2        }
  38   1      }
  39          
  40          void trocarP1H(){
  41   1        static char estado = 2;
  42   1        static unsigned long int cont = 0, contmax = 11500;
  43   1        
  44   1        switch(estado) {
  45   2          case 0:
  46   2            if(c2){
  47   3              cont = 0;
  48   3              P1 = (P0&0xF0) | (P1&0x0F);
  49   3              estado = 1;
  50   3              break;
  51   3            }
  52   2            break;
  53   2            
  54   2          case 1:
C51 COMPILER V9.59.0.0   PROJ1                                                             02/25/2019 16:28:31 PAGE 2   

  55   2            if (cont++ == contmax) {
  56   3              estado = 2;
  57   3              break;
  58   3            }
  59   2            break;
  60   2            
  61   2          case 2:
  62   2            P1 = (P1&0x0F);
  63   2            if (c2 == 0) {
  64   3              estado = 0;
  65   3            }
  66   2            break;
  67   2          
  68   2          default:
  69   2            estado = 2;
  70   2            break;
  71   2        }
  72   1      }
  73          
  74          main()
  75          {
  76   1        while(1) 
  77   1        {
  78   2          trocarP1L();
  79   2          trocarP1H();
  80   2        } 
  81   1      }
C51 COMPILER V9.59.0.0   PROJ1                                                             02/25/2019 16:28:31 PAGE 3   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION trocarP1L (BEGIN)
                                           ; SOURCE LINE # 6
                                           ; SOURCE LINE # 10
0000 E500        R     MOV     A,estado
0002 14                DEC     A
0003 6023              JZ      ?C0004
0005 14                DEC     A
0006 6035              JZ      ?C0006
0008 2402              ADD     A,#02H
000A 703B              JNZ     ?C0008
                                           ; SOURCE LINE # 11
000C         ?C0002:
                                           ; SOURCE LINE # 12
000C 30A03B            JNB     c1,?C0009
                                           ; SOURCE LINE # 13
000F E4                CLR     A
0010 F500        R     MOV     cont+03H,A
0012 F500        R     MOV     cont+02H,A
0014 F500        R     MOV     cont+01H,A
0016 F500        R     MOV     cont,A
                                           ; SOURCE LINE # 14
0018 E580              MOV     A,P0
001A 540F              ANL     A,#0FH
001C FF                MOV     R7,A
001D E590              MOV     A,P1
001F 54F0              ANL     A,#0F0H
0021 4F                ORL     A,R7
0022 F590              MOV     P1,A
                                           ; SOURCE LINE # 15
0024 750001      R     MOV     estado,#01H
                                           ; SOURCE LINE # 16
0027 22                RET     
                                           ; SOURCE LINE # 17
                                           ; SOURCE LINE # 18
                                           ; SOURCE LINE # 20
0028         ?C0004:
                                           ; SOURCE LINE # 21
0028 7800        R     MOV     R0,#LOW cont
002A 120000      E     LCALL   ?C?LLDIIDATA1
002D AB00        R     MOV     R3,contmax+03H
002F AA00        R     MOV     R2,contmax+02H
0031 A900        R     MOV     R1,contmax+01H
0033 A800        R     MOV     R0,contmax
0035 C3                CLR     C
0036 120000      E     LCALL   ?C?ULCMP
0039 700F              JNZ     ?C0009
                                           ; SOURCE LINE # 22
                                           ; SOURCE LINE # 23
003B 800A              SJMP    ?C0022
                                           ; SOURCE LINE # 24
                                           ; SOURCE LINE # 25
                                           ; SOURCE LINE # 27
003D         ?C0006:
                                           ; SOURCE LINE # 28
003D 5390F0            ANL     P1,#0F0H
                                           ; SOURCE LINE # 29
0040 20A007            JB      c1,?C0009
                                           ; SOURCE LINE # 30
0043 E4                CLR     A
C51 COMPILER V9.59.0.0   PROJ1                                                             02/25/2019 16:28:31 PAGE 4   

0044 F500        R     MOV     estado,A
                                           ; SOURCE LINE # 31
                                           ; SOURCE LINE # 32
0046 22                RET     
                                           ; SOURCE LINE # 34
0047         ?C0008:
                                           ; SOURCE LINE # 35
0047         ?C0022:
0047 750002      R     MOV     estado,#02H
                                           ; SOURCE LINE # 36
                                           ; SOURCE LINE # 37
                                           ; SOURCE LINE # 38
004A         ?C0009:
004A 22                RET     
             ; FUNCTION trocarP1L (END)

             ; FUNCTION trocarP1H (BEGIN)
                                           ; SOURCE LINE # 40
                                           ; SOURCE LINE # 44
0000 E500        R     MOV     A,estado
0002 14                DEC     A
0003 6023              JZ      ?C0013
0005 14                DEC     A
0006 6035              JZ      ?C0015
0008 2402              ADD     A,#02H
000A 703B              JNZ     ?C0017
                                           ; SOURCE LINE # 45
000C         ?C0011:
                                           ; SOURCE LINE # 46
000C 30A13B            JNB     c2,?C0018
                                           ; SOURCE LINE # 47
000F E4                CLR     A
0010 F500        R     MOV     cont+03H,A
0012 F500        R     MOV     cont+02H,A
0014 F500        R     MOV     cont+01H,A
0016 F500        R     MOV     cont,A
                                           ; SOURCE LINE # 48
0018 E590              MOV     A,P1
001A 540F              ANL     A,#0FH
001C FF                MOV     R7,A
001D E580              MOV     A,P0
001F 54F0              ANL     A,#0F0H
0021 4F                ORL     A,R7
0022 F590              MOV     P1,A
                                           ; SOURCE LINE # 49
0024 750001      R     MOV     estado,#01H
                                           ; SOURCE LINE # 50
0027 22                RET     
                                           ; SOURCE LINE # 51
                                           ; SOURCE LINE # 52
                                           ; SOURCE LINE # 54
0028         ?C0013:
                                           ; SOURCE LINE # 55
0028 7800        R     MOV     R0,#LOW cont
002A 120000      E     LCALL   ?C?LLDIIDATA1
002D AB00        R     MOV     R3,contmax+03H
002F AA00        R     MOV     R2,contmax+02H
0031 A900        R     MOV     R1,contmax+01H
0033 A800        R     MOV     R0,contmax
0035 C3                CLR     C
0036 120000      E     LCALL   ?C?ULCMP
0039 700F              JNZ     ?C0018
C51 COMPILER V9.59.0.0   PROJ1                                                             02/25/2019 16:28:31 PAGE 5   

                                           ; SOURCE LINE # 56
                                           ; SOURCE LINE # 57
003B 800A              SJMP    ?C0023
                                           ; SOURCE LINE # 58
                                           ; SOURCE LINE # 59
                                           ; SOURCE LINE # 61
003D         ?C0015:
                                           ; SOURCE LINE # 62
003D 53900F            ANL     P1,#0FH
                                           ; SOURCE LINE # 63
0040 20A107            JB      c2,?C0018
                                           ; SOURCE LINE # 64
0043 E4                CLR     A
0044 F500        R     MOV     estado,A
                                           ; SOURCE LINE # 65
                                           ; SOURCE LINE # 66
0046 22                RET     
                                           ; SOURCE LINE # 68
0047         ?C0017:
                                           ; SOURCE LINE # 69
0047         ?C0023:
0047 750002      R     MOV     estado,#02H
                                           ; SOURCE LINE # 70
                                           ; SOURCE LINE # 71
                                           ; SOURCE LINE # 72
004A         ?C0018:
004A 22                RET     
             ; FUNCTION trocarP1H (END)

             ; FUNCTION main (BEGIN)
                                           ; SOURCE LINE # 74
                                           ; SOURCE LINE # 75
0000         ?C0019:
                                           ; SOURCE LINE # 76
                                           ; SOURCE LINE # 77
                                           ; SOURCE LINE # 78
0000 120000      R     LCALL   trocarP1L
                                           ; SOURCE LINE # 79
0003 120000      R     LCALL   trocarP1H
                                           ; SOURCE LINE # 80
0006 80F8              SJMP    ?C0019
             ; FUNCTION main (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    158    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     18    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
